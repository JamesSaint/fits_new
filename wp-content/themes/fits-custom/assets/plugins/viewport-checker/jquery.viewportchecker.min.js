!function(a){a.fn.viewportChecker=function(b){var c={classToAdd:"visible",classToRemove:"invisible",offset:100,repeat:!1,invertBottomOffset:!0,callbackFunction:function(){},scrollHorizontal:!1};a.extend(c,b);var d=this,e={height:a(window).height(),width:a(window).width()},f=-1!=navigator.userAgent.toLowerCase().indexOf("webkit")?"body":"html";return this.checkElements=function(){var b,g;c.scrollHorizontal?(b=a(f).scrollLeft(),g=b+e.width):(b=a(f).scrollTop(),g=b+e.height),d.each(function(){var d=a(this),e={},f={};if(d.data("vp-add-class")&&(f.classToAdd=d.data("vp-add-class")),d.data("vp-remove-class")&&(f.classToRemove=d.data("vp-remove-class")),d.data("vp-offset")&&(f.offset=d.data("vp-offset")),d.data("vp-repeat")&&(f.repeat=d.data("vp-repeat")),d.data("vp-scrollHorizontal")&&(f.scrollHorizontal=d.data("vp-scrollHorizontal")),d.data("vp-invertBottomOffset")&&(f.scrollHorizontal=d.data("vp-invertBottomOffset")),a.extend(e,c),a.extend(e,f),!d.hasClass(e.classToAdd)||e.repeat){var h=e.scrollHorizontal?Math.round(d.offset().left)+e.offset:Math.round(d.offset().top)+e.offset,i=e.scrollHorizontal?h+d.width():h+d.height();e.invertBottomOffset&&(i-=2*e.offset),g>h&&i>b?(d.removeClass(e.classToRemove),d.addClass(e.classToAdd),e.callbackFunction(d,"add")):d.hasClass(e.classToAdd)&&e.repeat&&(d.removeClass(e.classToAdd),e.callbackFunction(d,"remove"))}})},a(window).bind("load scroll touchmove MSPointerMove",this.checkElements),a(window).resize(function(){e={height:a(window).height(),width:a(window).width()},d.checkElements()}),this.checkElements(),this}}(jQuery);